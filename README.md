# X-ray_insitu_app
软件功能简介及使用说明

        该软件提供了对二维散射图片的处理、积分、原位数据处理等功能。以下是各个功能模块的详细说明。
        
        1. 二维图片处理
        
        1.1 导入图片
        
        左侧双击 .tif 文件导入
        点击文件名 - 选择文件按钮
        直接拖入右上角框内
        
        1.2 调整 Colorbar
        
        调整 Colorbar_min 和 Colorbar_max 参数
        默认的 colormap 为 jet，当前版本不提供调整色系功能
        
        1.3 改变二维坐标显示
        
        默认坐标系单位为 pixel
        转化为 Qxy 和 Qz 坐标选择“切图”
        
        1.4 导出二维图片
        
        点击选择"导出文件夹"选定文件夹路径，默认为程序所在的当前文件夹
        点击"导出图片-jpg"
        
        1.5 调整切图显示范围
        
        调整“切图Qr_min”，“切图Qr_max”，“切图Qz_min”，“切图Qz_max”
        如果设置为 -121 则为不加限制
        
        1.6 遮盖图片坏点和gap
        
        改变“Mask_min”和"Mask_max"将小于或者大于设定值的像素设置为0
        
        2. 二维图片积分为一维曲线
        
        2.1 导入图片
        
        根据第1步导入图片，原图切图均可
        
        2.2 确定实验条件
        
        修改“入射角”（单位：°），“圆心-X”（单位：pixel），“圆心-Y”(单位：pixel)，“距离”(单位：mm)，“像素-X”（单位：um），“像素-Y”（单位：um），“波长”（单位：埃）
        实验条件的确定可以由 Fit2D 完成
        友情链接 Fit2D: http://ftp.esrf.eu/pub/expg/FIT2D/
        
        2.3 积分区域选择
        
        点击“积分区域选择”按钮，选四个点：初始方位角，最终方位角，起始积分内径，最终积分外径，确定一个顺时针扇形
        也可以通过按钮下方四个文本框手动输入，单位分别为°以及pixel
        
        2.4 选择积分方式
        
        选择“径像积分”和“角向积分”，分别对应沿 q 积分和沿方位角积分
        调整积分步长，默认为 500
        
        2.5 选择坐标轴
        
        默认为 Log 坐标，q 为横坐标，单位埃分之一，降噪平滑
        可选项：pixel 和 2Theta
        2Theta 的为铜靶波长 1.54 埃下的角度
        也可以选择对应的 unsmoothed 的未经过平滑操作的原始数据
        纵坐标也可以转化为线性坐标
        
        2.6 导出一维结果
        
        先“选择导出文件夹”，然后点击积分结果导出-txt，导出格式为 txt
        
        3. 原位数据处理
        
        3.1 选择原位数据文件夹
        
        在最下面一栏选择文件夹选择原位数据所处的文件夹
        
        3.2 文件名匹配模式
        
        输入匹配模式，如原位数据为 Cl0001.tif, Cl0002.tif....，则匹配模式可以设置为 Cl*.tif
        
        3.3 批量处理功能
        
        提供二维图片批量导出、一维曲线批量导出、以及一维曲线的扣背底
        前置操作参考单张图片
        调整 Colorbar_min、Colorbar_max 以及 Mask_min, Mask_max
        点击切图或原图
        
        3.4 设置实验参数和积分区域
        
        参考第 2 步设置实验参数和积分区域
        
        3.5 设置扣背底参数
        
        有三个参数：以第几张图片为基准，积分曲线显示范围的起始和结束
        
        3.6 批量处理导出
        
        点击批量处理后，导出 output 和 output_subbg 文件
        第一列是横坐标，之后每一列代表对应图片的积分坐标
        可以用原位热图预览初步预览本组数据的情况，建议用 origin heatmap 模块进行处理
        
        3.7 导入已处理的原位数据
        
        点击原位文件导入，导入处理过的 output.txt 文件，显示原位热图预览
        使用以上功能，您可以对二维散射图片进行处理、积分以及批量处理原位数据。如有疑问，请参阅相关文档或联系开发者。
        
        ————————————————————————————————
        
        更新日志：

        1.1 增加了关闭软件后对之前输入参数的记忆。

        1.2 增加了原位数据处理的暂停功能。
        
        1.3 增加了翻转按钮，按需可以对二维图进行上下翻转操作。注意，翻转对积分区域选择的图像不适用。
        
        1.4 优化了扣背底参数的实现。
        
        1.5 热图预览使用插值方法，是的对数据量较少的output文件显示更为优化。
        
        1.6 增加了对除tif，jpg外的图片文件的支持。
        
        """
